# ニキシー管風デジタル時計 🕐

ESP32-C3 と 6 個の ST7789 TFT ディスプレイを使用した WebUI 対応ニキシー管風デジタル時計

![License](https://img.shields.io/badge/license-MIT-b## 💻 ソフトウェア設定

### 🛠️ 開発環境

- **プラットフォーム**: PlatformIO (VSCode 推奨)
- **フレームワーク**: Arduino Framework
- **ターゲット**: ESP32-C3
- **必要ライブラリ**:
  - Arduino_GFX_Library (ディスプレイ制御)
  - WiFi (内蔵)
  - WebServer (内蔵)
  - SPIFFS (ファイルシステム)
  - ArduinoJson (JSON 処理)

### ⚙️ WiFi 設定

1. `src/config.h.example`を`src/config.h`にコピー
2. WiFi 認証情報を設定:

```cpp
// WiFi設定
const char* ssid = "YOUR_WIFI_SSID";
const char* password = "YOUR_WIFI_PASSWORD";

// NTP設定
const char* ntpServer = "ntp.nict.jp";
const int timeZone = 9; // JST (UTC+9)
```

## 🚀 ビルド・実行方法

### 📥 セットアップ手順 rm](https://img.shields.io/badge/platform-ESP32--C3-orange.svg)

![Build](https://img.shields.io/badge/build-PlatformIO-green.svg)

## 📋 プロジェクト概要

このプロジェクトは、ESP32-C3 マイコンと 6 個の ST7789 TFT ディスプレイを使用して、ニキシー管風のデジタル時計を作成します。WiFi 経由で NTP サーバーから正確な時刻を取得し、HH:MM:SS 形式で表示します。**WebUI を通じてカスタム画像をアップロード**して、独自のニキシー管デザインにカスタマイズできるのが最大の特徴です。

## ✨ 主な機能

### 🎯 基本機能

- **6 ディスプレイ表示**: 時:分:秒の 6 桁をそれぞれ独立したディスプレイで表示
- **ニキシー管風デザイン**: レトロな雰囲気のニキシー管画像を使用
- **WiFi 時刻同期**: NTP サーバーから自動で正確な時刻を取得（JST 対応）
- **省電力設計**: 変更があった桁のみ更新する効率的な表示システム

### 🌐 WebUI 機能

- **カスタム画像アップロード**: 70×134 ピクセルの独自画像をアップロード可能
- **永続化ストレージ**: アップロードした画像は電源 OFF 後も保持
- **リアルタイム管理**: ブラウザから時計の設定と状態監視
- **RGB565 自動変換**: JPEG/PNG 等の一般画像を自動で RGB565 形式に変換
- **縦横比保持**: アップロード時に自動で縦横比を維持してリサイズ
- **ストレージ監視**: SPIFFS 容量使用状況をリアルタイム表示

### 💾 データ永続化機能

- **設定保存**: カスタム画像使用状態が自動保存され、再起動後も維持
- **画像永続化**: アップロードしたカスタム画像は SPIFFS に保存され、次回起動時も利用可能
- **容量管理**: ストレージ使用量の監視と警告表示
- **自動バックアップ**: 設定変更時の自動保存機能

### 🔧 技術機能

- **SPIFFS 使用**: HTML/CSS/JS ファイルを分離したプロフェッショナルな構成
- **メモリ最適化**: 動的メモリ管理で ESP32-C3 のメモリ制限に対応
- **セキュア設定**: WiFi 認証情報は外部ファイル（config.h）で管理
- **設定永続化**: JSON 形式でユーザー設定を SPIFFS に自動保存
- **容量監視**: リアルタイムストレージ使用量監視とアラート機能
- **エラーハンドリング**: 画像読み込み失敗時の自動フォールバック機能

## 🛠️ ハードウェア構成

### 必要な部品

- **ESP32-C3 DevKit-M-1** × 1
- **ST7789 TFT ディスプレイ (170×320)** × 6
- **10kΩ 抵抗** × 1 (RST pin 用プルアップ)
- **ジャンパーワイヤー** 適量
- **ブレッドボード** または カスタム PCB

### ディスプレイ配置

```
┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
│ディスプレイ6│ディスプレイ5│ディスプレイ4│ディスプレイ3│ディスプレイ2│ディスプレイ1│
│   時十の位  │   時一の位  │   分十の位  │   分一の位  │   秒十の位  │   秒一の位  │
│  (GPIO21)   │  (GPIO20)   │  (GPIO10)   │  (GPIO9)    │  (GPIO8)    │  (GPIO7)    │
└─────────────┴─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
          12:34:56 の表示例
```

## 🔌 配線図

### ESP32-C3 ピン配置

| 機能 | ESP32-C3 Pin | 接続先                          | 説明                             |
| ---- | ------------ | ------------------------------- | -------------------------------- |
| MOSI | GPIO6        | 全ディスプレイの SDA            | SPI データライン（共通）         |
| SCLK | GPIO4        | 全ディスプレイの SCL            | SPI クロックライン（共通）       |
| DC   | GPIO2        | 全ディスプレイの DC             | データ/コマンド切り替え（共通）  |
| RST  | 10kΩ→VCC     | 全ディスプレイの RST            | リセット（共通、プルアップ必須） |
| CS1  | GPIO7        | ディスプレイ 1 の CS (秒一の位) | チップセレクト（個別制御）       |
| CS2  | GPIO8        | ディスプレイ 2 の CS (秒十の位) | チップセレクト（個別制御）       |
| CS3  | GPIO9        | ディスプレイ 3 の CS (分一の位) | チップセレクト（個別制御）       |
| CS4  | GPIO10       | ディスプレイ 4 の CS (分十の位) | チップセレクト（個別制御）       |
| CS5  | GPIO20       | ディスプレイ 5 の CS (時一の位) | チップセレクト（個別制御）       |
| CS6  | GPIO21       | ディスプレイ 6 の CS (時十の位) | チップセレクト（個別制御）       |

### ⚠️ 重要な注意事項

- **RST pin は 10kΩ で VCC にプルアップしてください**
- **GPIO20, 21 は ESP32-C3 で不安定な場合があります（GPIO5, 3 への変更を推奨）**
- **全ディスプレイは 3.3V 電源で動作します**
- **SPI 通信のため、MOSI/SCLK/DC は全ディスプレイで共通接続**

## 🌐 WebUI 機能

### 📱 Web サーバーアクセス

1. **IP アドレス確認**: シリアルモニタで ESP32 の IP アドレスを確認
2. **ブラウザアクセス**: `http://[ESP32のIPアドレス]`にアクセス
3. **リアルタイム表示**: 現在時刻が WebUI でリアルタイム表示
4. **レスポンシブデザイン**: PC・スマートフォン両対応

### 🎨 カスタム画像アップロード機能

#### 📤 画像アップロード手順

1. **WebUI アクセス**: ESP32 の IP アドレスにブラウザでアクセス
2. **数字選択**: 0-9 の中からカスタマイズしたい数字を選択
3. **画像選択**: ローカルファイルから画像を選択
4. **自動変換**: 画像は自動的に 70×134 ピクセル、RGB565 フォーマットに変換
5. **アップロード実行**: 「アップロード」ボタンで送信

#### 🖼️ 対応画像仕様

| 項目               | 仕様              | 説明                           |
| ------------------ | ----------------- | ------------------------------ |
| **最大解像度**     | 70×134 ピクセル   | ニキシー管デフォルト画像サイズ |
| **ファイルサイズ** | 512KB 以下        | 一般画像ファイル制限           |
| **RGB565 サイズ**  | 18,760 バイト     | 変換後の固定サイズ             |
| **対応形式**       | JPEG, PNG, GIF 等 | ブラウザサポート形式           |
| **縦横比**         | 自動保持          | リサイズ時に縦横比維持         |
| **背景**           | 黒色              | 余白部分は黒で塗りつぶし       |

#### 🔄 画像管理機能

- **🔄 デフォルト画像に戻す**: 元のニキシー管画像に一括リセット
- **✨ カスタム画像を使用**: アップロード画像に一括切り替え
- **🔃 表示を更新**: 強制的に画面をリフレッシュ
- **📊 状態確認**: 各数字のアップロード状況とメモリ使用量を表示

#### 🛡️ エラーハンドリング

- **ファイルサイズチェック**: 大きすぎる画像は自動でリジェクト
- **フォーマット確認**: 不正なファイル形式は事前にブロック
- **メモリ保護**: メモリ不足時は自動でデフォルト画像にフォールバック
- **リアルタイム状態表示**: アップロード進行状況を視覚的に表示

## 💻 ソフトウェア設定

### 開発環境

- **PlatformIO IDE**: VS Code + PlatformIO 拡張機能
- **Arduino Framework**: ESP32-C3 サポート
- **Arduino_GFX Library**: v1.6.0

### 必要なライブラリ

```ini
[lib_deps]
moononournation/GFX Library for Arduino@^1.6.0
bblanchon/ArduinoJson@^6.21.3
```

### WiFi 設定

1. `src/config.h.example`を`src/config.h`にコピー
2. WiFi 認証情報を設定:

```cpp
// WiFi設定
const char* ssid = "YOUR_WIFI_SSID";
const char* password = "YOUR_WIFI_PASSWORD";

// NTP設定
const char* ntpServer = "ntp.nict.jp";
const int timeZone = 9; // JST (UTC+9)
```

## 🚀 ビルド・実行方法

### 1. 環境準備

#### 1. 環境準備

```bash
# プロジェクトをクローン
git clone <repository_url>
cd nikisiLOCAL

# WiFi設定ファイルを作成
cp src/config.h.example src/config.h
# エディタでconfig.hを編集してWiFi情報を入力
```

#### 2. ビルド・デプロイ

```bash
# プロジェクトをビルド
pio run

# SPIFFSにWebファイルをアップロード（重要！）
pio run -t uploadfs

# ESP32-C3にプログラムをアップロード
pio run -t upload

# シリアルモニターでデバッグ情報を確認
pio device monitor
```

#### 3. 初回起動確認

1. **シリアルモニタ確認**: WiFi 接続状況と IP アドレスを確認

   ```
   WiFi connected!
   IP address: 192.168.1.100
   Web server started
   Access at: http://192.168.1.100
   ```

2. **WebUI アクセス**: ブラウザで表示された IP アドレスにアクセス
3. **動作確認**: 時計表示と WebUI が正常に動作することを確認

### ⚙️ 設定可能項目

| 設定項目           | ファイル       | 説明                   |
| ------------------ | -------------- | ---------------------- |
| WiFi SSID/Password | `src/config.h` | WiFi 接続情報          |
| NTP サーバー       | `src/config.h` | 時刻同期サーバー       |
| タイムゾーン       | `src/main.cpp` | 日本時間（JST, UTC+9） |
| ディスプレイピン   | `src/main.cpp` | GPIO ピン配置          |
| 画像サイズ         | `src/main.cpp` | 70×134 ピクセル        |

## 📁 プロジェクト構成

```
nikisiLOCAL/
├── 📄 platformio.ini          # PlatformIO設定ファイル
├── 📄 README.md               # このファイル
├── 📂 src/                    # ソースコードディレクトリ
│   ├── 🎯 main.cpp            # メインプログラム（時計制御・WebServer）
│   ├── ⚙️ config.h            # WiFi設定（gitignore対象）
│   ├── 📋 config.h.example    # WiFi設定テンプレート
│   └── 🎨 image_data.h        # デフォルトニキシー管画像データ
├── 📂 data/                   # SPIFFS用Webファイル
│   ├── 🌐 index.html          # WebUI（アップロード機能付き）
│   └── 🎨 style.css           # WebUI用CSS（index.html内包）
├── 📂 include/                # ヘッダーファイル（未使用）
├── 📂 lib/                    # プライベートライブラリ（未使用）
├── 📂 test/                   # テストファイル（未使用）
└── 📄 .gitignore              # Git除外設定
```

### 🔧 重要ファイル詳細

#### `src/main.cpp`

- **機能**: ESP32 メインプログラム
- **主要処理**:
  - ディスプレイ制御（6 画面同時）
  - WiFi 接続・NTP 時刻同期
  - Web サーバー運用
  - カスタム画像管理（SPIFFS）
  - メモリ最適化処理
  - 設定永続化（JSON 形式）
  - ストレージ容量監視
  - エラーハンドリング・自動復旧

#### `data/index.html`

- **機能**: WebUI インターフェース
- **主要機能**:
  - リアルタイム時刻表示
  - カスタム画像アップロード（0-9 各数字）
  - RGB565 自動変換
  - 縦横比保持リサイズ
  - システム状態監視
  - ストレージ情報表示（総容量・使用量・空き容量）
  - 容量警告アラート（使用率 90%超で赤色表示）
  - 自動更新機能（5 秒間隔）

## 🌐 API エンドポイント

| エンドポイント    | メソッド | 機能                     | レスポンス例                     |
| ----------------- | -------- | ------------------------ | -------------------------------- |
| `/`               | GET      | WebUI ページ表示         | HTML                             |
| `/upload`         | POST     | カスタム画像アップロード | `{"success":true}`               |
| `/api/time`       | GET      | 現在時刻取得             | `{"time":"12:34:56"}`            |
| `/api/status`     | GET      | システム状態取得         | 詳細なステータス情報（下記参照） |
| `/api/reset`      | POST     | デフォルト画像リセット   | `{"success":true}`               |
| `/api/use-custom` | POST     | カスタム画像使用開始     | `{"success":true}`               |
| `/api/refresh`    | POST     | 画面強制更新             | `{"success":true}`               |

### 📋 `/api/status` レスポンス詳細

```json
{
  "useCustomImages": true,
  "customImages": [
    true,
    false,
    true,
    false,
    false,
    false,
    false,
    false,
    false,
    false
  ],
  "freeHeap": 180000,
  "spiffs": {
    "total": 1572864,
    "used": 245760,
    "free": 1327104,
    "imageSize": 18760,
    "maxImages": 70
  }
}
```

#### レスポンス項目説明

- `useCustomImages`: カスタム画像使用状態（boolean）
- `customImages`: 各数字（0-9）のカスタム画像存在状況（boolean 配列）
- `freeHeap`: 使用可能メモリ量（bytes）
- `spiffs.total`: SPIFFS 総容量（bytes）
- `spiffs.used`: SPIFFS 使用済み容量（bytes）
- `spiffs.free`: SPIFFS 空き容量（bytes）
- `spiffs.imageSize`: 1 画像あたりのサイズ（18,760 bytes）
- `spiffs.maxImages`: 追加可能な画像数

## 💾 ストレージ管理

### 📊 容量情報

- **ESP32-C3 SPIFFS 容量**: 約 1.5MB
- **1 画像サイズ**: 18,760 バイト（70×134×2 バイト）
- **最大保存可能画像数**: 約 80 枚（システムファイル除く）
- **WebUI ファイル**: 約 10KB（index.html + CSS）

### ⚠️ 容量警告

WebUI では使用率に応じてカラーコーディングを実装：

- 🟢 **70%未満**: 正常（緑色表示）
- 🟡 **70-90%**: 注意（黄色表示）
- 🔴 **90%超**: 警告（赤色表示）

### 🔄 データ管理機能

- **自動設定保存**: カスタム画像使用状態の変更時に自動保存
- **起動時復元**: 電源 ON 時に前回の設定状態を自動復元
- **容量監視**: 5 秒間隔でリアルタイム容量情報更新
- **エラー回復**: 画像読み込み失敗時にデフォルト画像へ自動フォールバック

## 🔧 トラブルシューティング

### ❗ よくある問題と解決方法

#### 1. 🖥️ ディスプレイにノイズが表示される

**原因**: 電源供給不足、信号品質劣化
**解決方法**:

- 3.3V 電源の容量を確認（全ディスプレイで約 1A 必要）
- ジャンパーワイヤーを短くする
- 共通配線（MOSI/SCLK/DC）の品質を向上

#### 2. 🌐 WiFi に接続できない

**原因**: WiFi 設定エラー、信号強度不足
**解決方法**:

```cpp
// config.hの設定を確認
const char* ssid = "正確なSSID";
const char* password = "正確なパスワード";
```

- シリアルモニターで WiFi 接続ログを確認
- 2.4GHz 帯の WiFi を使用（5GHz 帯不可）

#### 3. 📱 WebUI にアクセスできない

**原因**: IP アドレス不明、ファイアウォールブロック
**解決方法**:

- シリアルモニターで IP アドレスを確認
- `pio run -t uploadfs`で Web ファイルがアップロードされているか確認
- ファイアウォール設定を確認

#### 4. 💾 カスタム画像がアップロードできない

**原因**: ファイルサイズ不正、SPIFFS 容量不足
**解決方法**:

- 画像サイズを 70×134 ピクセルに調整
- WebUI のストレージ情報で空き容量を確認
- 不要な画像を削除してから再アップロード
- RGB565 形式（18,760 バイト）であることを確認

#### 5. 🔄 再起動後にカスタム画像設定が失われる

**原因**: 設定保存の失敗、SPIFFS の破損
**解決方法**:

- シリアルモニターで「Settings saved to SPIFFS」メッセージを確認
- SPIFFS 初期化エラーが発生していないかチェック
- 必要に応じて`SPIFFS.format()`でフォーマット実行

#### 6. ⚠️ ストレージ容量不足警告

**原因**: SPIFFS の使用率が 90%を超過
**解決方法**:

- WebUI で不要なカスタム画像を削除（🔄 デフォルト画像に戻すボタン）
- `/api/status`で storageInfo を確認
- 1 画像 18,760 バイトを目安に使用量を計算

#### 4. 💾 カスタム画像アップロードエラー

**原因**: ファイルサイズ、フォーマット、メモリ不足
**解決方法**:

- 画像ファイルサイズを 512KB 以下に
- RGB565 ファイルは正確に 18,760 バイト
- ESP32 を再起動してメモリをクリア

#### 5. ⚡ 一部のディスプレイが表示されない

**原因**: GPIO20/21 の不安定性（ESP32-C3 特有）
**解決方法**:

- GPIO5, GPIO3 への変更を検討
- 配線の接触不良を確認
- 電源供給能力をチェック

#### 6. 🕐 時刻が正確でない

**原因**: NTP サーバー接続失敗、タイムゾーン設定
**解決方法**:

```cpp
// main.cppでタイムゾーン確認
configTime(9 * 3600, 0, ntpServer); // JST (UTC+9)
```

- インターネット接続を確認
- NTP サーバーの応答性をテスト

## 📊 パフォーマンス情報

| 項目              | 仕様     | 実測値        |
| ----------------- | -------- | ------------- |
| **メモリ使用量**  | 約 180KB | 動的変動      |
| **画像サイズ**    | 70×134px | 18,760 バイト |
| **応答時間**      | WebUI    | < 200ms       |
| **更新頻度**      | 時計表示 | 1 秒間隔      |
| **消費電力**      | 推定     | < 2W          |
| **WiFi 到達距離** | 一般的   | 10-30m        |

## 🤝 貢献とライセンス

### 📋 ライセンス

このプロジェクトは**MIT ライセンス**の下で公開されています。商用・非商用問わず自由にご利用ください。

### 🤝 貢献方法

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add some amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

### 🐛 バグレポート・要望

- **Issues**: GitHub の Issues ページで報告
- **情報**: 以下の情報を含めてください
  - ESP32-C3 のハードウェア情報
  - PlatformIO のバージョン
  - エラーメッセージ（シリアルモニター出力）
  - 再現手順

## 📚 参考資料

### 📖 技術資料

- [ESP32-C3 Technical Reference Manual](https://www.espressif.com/sites/default/files/documentation/esp32-c3_technical_reference_manual_en.pdf)
- [Arduino_GFX_Library Documentation](https://github.com/moononournation/Arduino_GFX)
- [ST7789 Display Controller Datasheet](https://www.rhydolabz.com/documents/33/ST7789.pdf)

### 🛠️ 開発ツール

- [PlatformIO Documentation](https://docs.platformio.org/)
- [VS Code Extensions for PlatformIO](https://marketplace.visualstudio.com/items?itemName=platformio.platformio-ide)

---

## 📝 更新履歴

| バージョン | 日付       | 更新内容                               |
| ---------- | ---------- | -------------------------------------- |
| v1.0.0     | 2025-01-24 | 初回リリース                           |
| v1.1.0     | 2025-01-24 | WebUI カスタム画像アップロード機能追加 |
| v1.2.0     | 2025-01-24 | メモリ最適化、70×134 画像対応          |

---

**🎯 プロジェクトゴール**: モダンな WebUI 技術とクラシックなニキシー管の美学を融合した、自分だけの時計を作りましょう！

**Made with ❤️ for makers and hobbyists**

- 配線の接触不良を確認
- 電源供給を確認

#### 5. カスタム画像が表示されない

- **原因**: カスタム画像のロード失敗
- **解決方法**:
  - シリアルモニタでデバッグ情報を確認
  - `/api/status`でメモリ状況を確認
  - 「カスタム画像を使用」ボタンを押下

## 🔍 API リファレンス

### WebAPI エンドポイント

| エンドポイント    | メソッド | 説明                 |
| ----------------- | -------- | -------------------- |
| `/`               | GET      | WebUI 表示           |
| `/upload`         | POST     | 画像アップロード     |
| `/api/time`       | GET      | 現在時刻取得         |
| `/api/status`     | GET      | システム状態取得     |
| `/api/reset`      | POST     | デフォルト画像に戻す |
| `/api/use-custom` | POST     | カスタム画像を使用   |
| `/api/refresh`    | POST     | 表示強制更新         |

### ステータス API レスポンス例

```json
{
  "useCustomImages": true,
  "customImages": [
    true,
    false,
    true,
    false,
    false,
    false,
    false,
    false,
    false,
    false
  ],
  "freeHeap": 234567
}
```

## 📝 更新履歴・新機能

### 🆕 Version 2.0 - カスタム画像永続化対応（最新）

#### ✨ 新機能

- **設定永続化**: カスタム画像使用状態を JSON 形式で SPIFFS に自動保存
- **画像永続化**: アップロードしたカスタム画像が再起動後も保持
- **ストレージ監視**: リアルタイム SPIFFS 容量監視と WebUI 表示
- **容量警告**: 使用率 90%超過時の自動警告表示（赤色アラート）
- **自動復旧**: 画像読み込み失敗時のデフォルト画像フォールバック

#### 🔧 技術改善

- **メモリ効率化**: 動的メモリ管理とバッファ最適化
- **エラーハンドリング**: 強化されたファイル操作エラー処理
- **API 拡張**: `/api/status`に詳細なストレージ情報を追加
- **WebUI 改良**: 5 秒間隔でのリアルタイム情報更新

#### 📊 容量管理

- 1 画像サイズ: 18,760 バイト（70×134×2 バイト）
- 最大保存可能: 約 80 枚（1.5MB SPIFFS）
- カラーコーディング: 緑（70%未満）→ 黄（70-90%）→ 赤（90%超）

### 📋 Version 1.0 - 基本機能

- 6 ディスプレイニキシー管時計
- WiFi・NTP 時刻同期
- WebUI カスタム画像アップロード
- RGB565 自動変換

## 🎯 今後の拡張予定

### 計画中の機能

- [ ] **アラーム機能**: 指定時刻でのアラート
- [ ] **タイマー機能**: カウントダウンタイマー
- [ ] **色彩調整**: RGB 調整機能
- [ ] **アニメーション**: 数字切り替え時のエフェクト
- [ ] **温度表示**: DS18B20 センサー連携
- [ ] **音楽再生**: DFPlayer Mini 連携

### ハードウェア改良

- [ ] **PCB 設計**: 専用基板の作成
- [ ] **ケース設計**: 3D プリント対応
- [ ] **電源回路**: 外部電源対応
- [ ] **GPIO 変更**: より安定なピン配置

## 🤝 コントリビューション

プロジェクトへの貢献を歓迎します！

1. **Fork**: このリポジトリをフォーク
2. **Feature Branch**: 新機能用のブランチを作成
3. **Commit**: 変更をコミット
4. **Pull Request**: プルリクエストを作成

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 📞 サポート

質問や問題がある場合は、GitHub の Issues ページでお知らせください。

---

**楽しいニキシー管ライフを！** 🎉

- **解決**:
  - 各ディスプレイに 100nF バイパスコンデンサを追加
  - ESP32 の電源に 1000μF コンデンサを追加
  - GPIO20, 21 を GPIO5, 3 に変更

#### 2. 一部のディスプレイが動作しない

- **原因**: CS pin の競合、配線ミス
- **解決**:
  - 配線を再確認
  - 各ディスプレイの CS pin が正しく接続されているか確認

#### 3. WiFi 接続エラー

- **原因**: SSID/パスワードの間違い、WiFi 規格非対応
- **解決**:
  - config.h の設定を再確認
  - 2.4GHz WiFi を使用しているか確認

#### 4. 時刻が表示されない

- **原因**: NTP サーバー接続失敗
- **解決**:
  - インターネット接続を確認
  - NTP サーバーアドレスを変更 (`pool.ntp.org`など)

## 📈 カスタマイズ

### 表示順序の変更

`updateClock()` 関数内のディスプレイ割り当てを変更することで、表示順序をカスタマイズできます。

### ニキシー管画像の変更

`image_data.h` ファイル内の画像データを変更することで、異なるデザインのニキシー管を使用できます。

### タイムゾーンの変更

`config.h` の `timeZone` 値を変更することで、任意のタイムゾーンに対応できます。

## 📝 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 🤝 コントリビューション

プルリクエストやイシューの報告を歓迎します。改善提案がございましたら、お気軽にお知らせください。

## 📞 サポート

技術的な質問や問題については、GitHub の Issues ページでお尋ねください。

---

**最終更新**: 2025 年 7 月 23 日
